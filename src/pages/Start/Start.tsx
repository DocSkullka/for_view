import { useCallback, useEffect, useMemo } from 'react';
import { useNavigate } from 'react-router-dom';
import { retrieveLaunchParams } from '@telegram-apps/sdk';
import dayjs from 'dayjs';
import { HttpStatusCode } from 'axios';
import { useUserContext } from '@/services/contexts/user/context.ts';
import { usePopoverContext } from '@/services/contexts/popover/context.ts';
import { POPOVER_TYPES } from '@/services/contexts/popover/constants.ts';
import { FARMING_AMOUNT } from '@/services/constants.ts';
import { User } from '@/services/types.ts';
import styles from './start.module.scss';

export function Start() {
  const { openPopover, type } = usePopoverContext();
  const { loading, user, setUser } = useUserContext();
  const navigate = useNavigate();


  const shouldClaimReward = useMemo(() => {
    if (!user) return false;

    return user?.rewards?.find((reward) => reward.day === user?.streak && !reward.claimed);
  }, [user]);

  const shouldClaimFarming = useMemo(() => {
    return user?.farming.availableAfter && dayjs(user.farming.availableAfter).isBefore(dayjs());
  }, [user]);

  const shouldStartFarming = useMemo(() => {
    return user?.farming.availableAfter === null;
  }, [user]);

  useEffect(() => {
    if (shouldClaimReward) {
      document.body.style.background = `none`;
      openPopover({ type: POPOVER_TYPES.CLAIM });

      return;
    }

    const shouldNavigateToPlay =
      !type &&
      !!user?.farming.availableAfter &&
      dayjs(user.farming.availableAfter).isAfter(dayjs());

    if (shouldNavigateToPlay) {
      navigate('/play', { replace: true });
    }
  }, [navigate, openPopover, shouldClaimReward, shouldStartFarming, type, user]);

  const handleStartFarmingClick = useCallback(async () => {
    document.body.style.background = `none`;
    if (user) {
      const { initDataRaw } = retrieveLaunchParams();

      const res = await fetch(`${import.meta.env.VITE_API_URL}/ipoon/rewards/farming`, {
        headers: {
          Authorization: initDataRaw || window.location.hash,
        },
        method: 'POST',
      });

      const data = (await res.json()) as { farming_start_time: string };

      setUser({
        farming: {
          availableAfter: dayjs(data.farming_start_time).add(8, 'h').toDate().toString(),
        },
      } as User);

      navigate('/play', { replace: true });
    }
  }, [user, setUser, navigate]);

  const handleClaimFarmingClick = useCallback(async () => {
    if (user) {
      const { initDataRaw } = retrieveLaunchParams();

      const res = await fetch(`${import.meta.env.VITE_API_URL}/ipoon/rewards/farming/submit`, {
        headers: {
          Authorization: initDataRaw || window.location.hash,
        },
        method: 'POST',
      });

      if (res.status === HttpStatusCode.Ok) {
        openPopover({
          type: POPOVER_TYPES.REWARD,
          reward: { name: '', claimed: true, id: '', amount: FARMING_AMOUNT, day: 1 },
        });

        setUser({
          farming: {
            availableAfter: null,
          },
          earnings: {
            total: user.earnings.total + FARMING_AMOUNT,
          },
        } as User);
      }
    }
  }, [user, setUser, openPopover]);

  if (loading && !user) return null;

  if (!loading && !user) {
    return (
      <main className={styles.invalid}>
        <p>Invalid referral link!</p>
        <p>
          Right now game functions in &quot;invite-mode&quot; only. <br />
          So you have to find someone to give you the link to enter the project!
        </p>
      </main>
    );
  }

  return (
    <main className={styles.start}>
      {shouldStartFarming && (
        <button className={styles.action} onClick={handleStartFarmingClick}>
          <svg width="345" height="78" viewBox="0 0 345 78" fill="none" xmlns="http://www.w3.org/2000/svg">
            <mask id="path-1-inside-1_73_3612" fill="white">
            <path d="M0 20C0 8.9543 8.95431 0 20 0H325C336.046 0 345 8.95431 345 20V58C345 69.0457 336.046 78 325 78H20C8.9543 78 0 69.0457 0 58V20Z"/>
            </mask>
            <path d="M0 20C0 8.9543 8.95431 0 20 0H325C336.046 0 345 8.95431 345 20V58C345 69.0457 336.046 78 325 78H20C8.9543 78 0 69.0457 0 58V20Z" fill="#101010"/>
            <path d="M0 20C0 7.29745 10.2975 -3 23 -3H322C334.703 -3 345 7.29745 345 20C345 10.6112 336.046 3 325 3H20C8.9543 3 0 10.6112 0 20ZM345 58C345 70.7026 334.703 81 322 81H23C10.2975 81 0 70.7026 0 58C0 67.3888 8.9543 75 20 75H325C336.046 75 345 67.3888 345 58ZM0 78V0V78ZM345 0V78V0Z" fill="white" mask="url(#path-1-inside-1_73_3612)"/>
            <path d="M91.9823 33.288C90.7343 33.288 89.6303 33.064 88.6703 32.616C87.7263 32.152 86.9103 31.472 86.2223 30.576L88.1903 28.68C88.6703 29.336 89.2303 29.84 89.8703 30.192C90.5103 30.528 91.2303 30.696 92.0303 30.696C93.8223 30.696 94.7183 29.88 94.7183 28.248C94.7183 27.576 94.5583 27.064 94.2383 26.712C93.9183 26.36 93.3903 26.104 92.6543 25.944L91.1903 25.656C89.6703 25.336 88.5503 24.792 87.8303 24.024C87.1103 23.256 86.7503 22.184 86.7503 20.808C86.7503 19.208 87.2223 18 88.1663 17.184C89.1263 16.368 90.4863 15.96 92.2463 15.96C93.4463 15.96 94.4703 16.16 95.3183 16.56C96.1823 16.944 96.9183 17.552 97.5263 18.384L95.5583 20.232C95.1423 19.672 94.6703 19.256 94.1423 18.984C93.6143 18.696 92.9663 18.552 92.1983 18.552C91.3503 18.552 90.7263 18.72 90.3263 19.056C89.9263 19.392 89.7263 19.936 89.7263 20.688C89.7263 21.312 89.8783 21.792 90.1823 22.128C90.5023 22.464 91.0143 22.712 91.7183 22.872L93.1823 23.184C93.9983 23.36 94.6863 23.576 95.2463 23.832C95.8223 24.088 96.2863 24.408 96.6383 24.792C97.0063 25.176 97.2703 25.632 97.4303 26.16C97.6063 26.672 97.6943 27.28 97.6943 27.984C97.6943 29.712 97.1983 31.032 96.2063 31.944C95.2303 32.84 93.8223 33.288 91.9823 33.288ZM106.626 18.864V33H103.626V18.864H99.426V16.248H110.85V18.864H106.626ZM121.645 33L120.469 28.632H115.069L113.893 33H111.013L115.909 16.248H119.701L124.597 33H121.645ZM118.453 21.624L117.925 18.96H117.589L117.061 21.624L115.789 26.208H119.749L118.453 21.624ZM130.32 33H127.32V16.248H134.256C135.728 16.248 136.84 16.696 137.592 17.592C138.36 18.488 138.744 19.736 138.744 21.336C138.744 22.6 138.504 23.648 138.024 24.48C137.544 25.296 136.84 25.856 135.912 26.16L138.96 33H135.72L132.96 26.4H130.32V33ZM133.944 23.904C134.456 23.904 134.856 23.768 135.144 23.496C135.448 23.224 135.6 22.768 135.6 22.128V20.64C135.6 20 135.448 19.544 135.144 19.272C134.856 19 134.456 18.864 133.944 18.864H130.32V23.904H133.944ZM147.886 18.864V33H144.886V18.864H140.686V16.248H152.11V18.864H147.886ZM160.494 33V16.248H170.286V18.864H163.494V23.232H169.374V25.776H163.494V33H160.494ZM181.233 33L180.057 28.632H174.657L173.481 33H170.601L175.497 16.248H179.289L184.185 33H181.233ZM178.041 21.624L177.513 18.96H177.177L176.649 21.624L175.377 26.208H179.337L178.041 21.624ZM189.907 33H186.907V16.248H193.843C195.315 16.248 196.427 16.696 197.179 17.592C197.947 18.488 198.331 19.736 198.331 21.336C198.331 22.6 198.091 23.648 197.611 24.48C197.131 25.296 196.427 25.856 195.499 26.16L198.547 33H195.307L192.547 26.4H189.907V33ZM193.531 23.904C194.043 23.904 194.443 23.768 194.731 23.496C195.035 23.224 195.187 22.768 195.187 22.128V20.64C195.187 20 195.035 19.544 194.731 19.272C194.443 19 194.043 18.864 193.531 18.864H189.907V23.904H193.531ZM213.153 23.448L213.345 20.616H213.009L211.905 23.352L208.881 29.808L205.881 23.352L204.777 20.64H204.441L204.633 23.448V33H201.801V16.248H205.089L207.585 21.696L208.809 25.128H209.025L210.249 21.696L212.697 16.248H215.985V33H213.153V23.448ZM219.377 33V30.624H221.369V18.624H219.377V16.248H226.361V18.624H224.369V30.624H226.361V33H219.377ZM233.89 23.472L232.714 20.568H232.378L232.57 23.568V33H229.738V16.248H233.074L237.706 25.776L238.882 28.68H239.218L239.026 25.68V16.248H241.858V33H238.522L233.89 23.472ZM255.475 30.456H255.139C255.011 31.272 254.619 31.952 253.963 32.496C253.307 33.024 252.403 33.288 251.251 33.288C249.315 33.288 247.827 32.544 246.787 31.056C245.747 29.568 245.227 27.44 245.227 24.672C245.227 23.136 245.379 21.824 245.683 20.736C246.003 19.632 246.451 18.728 247.027 18.024C247.603 17.304 248.291 16.784 249.091 16.464C249.907 16.128 250.811 15.96 251.803 15.96C253.307 15.96 254.539 16.288 255.499 16.944C256.459 17.584 257.211 18.512 257.755 19.728L255.307 21.144C255.035 20.344 254.619 19.712 254.059 19.248C253.515 18.784 252.763 18.552 251.803 18.552C250.747 18.552 249.915 18.896 249.307 19.584C248.715 20.272 248.419 21.256 248.419 22.536V26.712C248.419 27.992 248.715 28.976 249.307 29.664C249.915 30.352 250.747 30.696 251.803 30.696C252.763 30.696 253.563 30.44 254.203 29.928C254.843 29.416 255.163 28.68 255.163 27.72V26.496H252.235V23.952H258.019V33H255.475V30.456Z" fill="white"/>
            <path d="M118.153 62L117.271 58.724H113.221L112.339 62H110.179L113.851 49.436H116.695L120.367 62H118.153ZM115.759 53.468L115.363 51.47H115.111L114.715 53.468L113.761 56.906H116.731L115.759 53.468ZM124.087 62L120.397 49.436H122.719L124.843 57.212L125.311 59.984H125.563L126.031 57.212L128.137 49.436H130.387L126.751 62H124.087ZM138.384 62L137.502 58.724H133.452L132.57 62H130.41L134.082 49.436H136.926L140.598 62H138.384ZM135.99 53.468L135.594 51.47H135.342L134.946 53.468L133.992 56.906H136.962L135.99 53.468ZM142.19 62V60.218H143.684V51.218H142.19V49.436H147.428V51.218H145.934V60.218H147.428V62H142.19ZM149.961 62V49.436H152.211V60.038H156.621V62H149.961ZM166.007 62L165.125 58.724H161.075L160.193 62H158.033L161.705 49.436H164.549L168.221 62H166.007ZM163.613 53.468L163.217 51.47H162.965L162.569 53.468L161.615 56.906H164.585L163.613 53.468ZM170.263 49.436H175.609C176.593 49.436 177.331 49.718 177.823 50.282C178.327 50.846 178.579 51.638 178.579 52.658C178.579 53.486 178.405 54.128 178.057 54.584C177.709 55.04 177.193 55.292 176.509 55.34V55.61C176.881 55.61 177.217 55.682 177.517 55.826C177.829 55.958 178.093 56.15 178.309 56.402C178.537 56.642 178.711 56.936 178.831 57.284C178.951 57.62 179.011 57.992 179.011 58.4C179.011 58.916 178.939 59.396 178.795 59.84C178.663 60.272 178.471 60.65 178.219 60.974C177.967 61.298 177.661 61.55 177.301 61.73C176.953 61.91 176.557 62 176.113 62H170.263V49.436ZM172.513 60.038H175.465C175.837 60.038 176.125 59.942 176.329 59.75C176.545 59.546 176.653 59.21 176.653 58.742V57.86C176.653 57.392 176.545 57.062 176.329 56.87C176.125 56.666 175.837 56.564 175.465 56.564H172.513V60.038ZM172.513 54.656H175.105C175.465 54.656 175.747 54.566 175.951 54.386C176.155 54.206 176.257 53.894 176.257 53.45V52.604C176.257 52.16 176.155 51.848 175.951 51.668C175.747 51.488 175.465 51.398 175.105 51.398H172.513V54.656ZM181.416 62V49.436H183.666V60.038H188.076V62H181.416ZM190.284 62V49.436H197.826V51.398H192.534V54.674H197.16V56.582H192.534V60.038H197.826V62H190.284ZM212.169 62H204.285V59.912L207.831 56.366C208.455 55.754 208.893 55.214 209.145 54.746C209.409 54.278 209.541 53.792 209.541 53.288V52.748C209.541 52.232 209.403 51.836 209.127 51.56C208.851 51.272 208.455 51.128 207.939 51.128C206.907 51.128 206.265 51.752 206.013 53L204.069 52.244C204.345 51.248 204.825 50.498 205.509 49.994C206.193 49.478 207.063 49.22 208.119 49.22C208.791 49.22 209.367 49.304 209.847 49.472C210.327 49.628 210.717 49.862 211.017 50.174C211.329 50.474 211.551 50.852 211.683 51.308C211.827 51.752 211.899 52.256 211.899 52.82C211.899 53.24 211.857 53.63 211.773 53.99C211.689 54.338 211.545 54.692 211.341 55.052C211.149 55.412 210.885 55.79 210.549 56.186C210.213 56.57 209.793 57.014 209.289 57.518L206.679 60.11H212.169V62ZM218.236 62.216C217.504 62.216 216.874 62.096 216.346 61.856C215.818 61.604 215.38 61.22 215.032 60.704C214.696 60.176 214.444 59.504 214.276 58.688C214.108 57.86 214.024 56.87 214.024 55.718C214.024 54.566 214.108 53.582 214.276 52.766C214.444 51.938 214.696 51.266 215.032 50.75C215.38 50.222 215.818 49.838 216.346 49.598C216.874 49.346 217.504 49.22 218.236 49.22C218.968 49.22 219.598 49.346 220.126 49.598C220.654 49.838 221.086 50.222 221.422 50.75C221.77 51.266 222.028 51.938 222.196 52.766C222.364 53.582 222.448 54.566 222.448 55.718C222.448 56.87 222.364 57.86 222.196 58.688C222.028 59.504 221.77 60.176 221.422 60.704C221.086 61.22 220.654 61.604 220.126 61.856C219.598 62.096 218.968 62.216 218.236 62.216ZM218.236 60.29C218.92 60.29 219.394 60.074 219.658 59.642C219.934 59.198 220.072 58.478 220.072 57.482V53.954C220.072 52.958 219.934 52.244 219.658 51.812C219.394 51.368 218.92 51.146 218.236 51.146C217.552 51.146 217.072 51.368 216.796 51.812C216.532 52.244 216.4 52.958 216.4 53.954V57.482C216.4 58.478 216.532 59.198 216.796 59.642C217.072 60.074 217.552 60.29 218.236 60.29ZM231.611 56.582H227.021V62H224.771V49.436H227.021V54.674H231.611V49.436H233.861V62H231.611V56.582Z" fill="white" fill-opacity="0.6"/>
          </svg>
        </button>
      )}
      {shouldClaimFarming && (
        <button className={styles.action} onClick={handleClaimFarmingClick}>
          <svg width="345" height="78" viewBox="0 0 345 78" fill="none" xmlns="http://www.w3.org/2000/svg">
            <mask id="path-1-inside-1_73_3612" fill="white">
            <path d="M0 20C0 8.9543 8.95431 0 20 0H325C336.046 0 345 8.95431 345 20V58C345 69.0457 336.046 78 325 78H20C8.9543 78 0 69.0457 0 58V20Z"/>
            </mask>
            <path d="M0 20C0 8.9543 8.95431 0 20 0H325C336.046 0 345 8.95431 345 20V58C345 69.0457 336.046 78 325 78H20C8.9543 78 0 69.0457 0 58V20Z" fill="#101010"/>
            <path d="M0 20C0 7.29745 10.2975 -3 23 -3H322C334.703 -3 345 7.29745 345 20C345 10.6112 336.046 3 325 3H20C8.9543 3 0 10.6112 0 20ZM345 58C345 70.7026 334.703 81 322 81H23C10.2975 81 0 70.7026 0 58C0 67.3888 8.9543 75 20 75H325C336.046 75 345 67.3888 345 58ZM0 78V0V78ZM345 0V78V0Z" fill="white" mask="url(#path-1-inside-1_73_3612)"/>
            <path d="M91.9823 33.288C90.7343 33.288 89.6303 33.064 88.6703 32.616C87.7263 32.152 86.9103 31.472 86.2223 30.576L88.1903 28.68C88.6703 29.336 89.2303 29.84 89.8703 30.192C90.5103 30.528 91.2303 30.696 92.0303 30.696C93.8223 30.696 94.7183 29.88 94.7183 28.248C94.7183 27.576 94.5583 27.064 94.2383 26.712C93.9183 26.36 93.3903 26.104 92.6543 25.944L91.1903 25.656C89.6703 25.336 88.5503 24.792 87.8303 24.024C87.1103 23.256 86.7503 22.184 86.7503 20.808C86.7503 19.208 87.2223 18 88.1663 17.184C89.1263 16.368 90.4863 15.96 92.2463 15.96C93.4463 15.96 94.4703 16.16 95.3183 16.56C96.1823 16.944 96.9183 17.552 97.5263 18.384L95.5583 20.232C95.1423 19.672 94.6703 19.256 94.1423 18.984C93.6143 18.696 92.9663 18.552 92.1983 18.552C91.3503 18.552 90.7263 18.72 90.3263 19.056C89.9263 19.392 89.7263 19.936 89.7263 20.688C89.7263 21.312 89.8783 21.792 90.1823 22.128C90.5023 22.464 91.0143 22.712 91.7183 22.872L93.1823 23.184C93.9983 23.36 94.6863 23.576 95.2463 23.832C95.8223 24.088 96.2863 24.408 96.6383 24.792C97.0063 25.176 97.2703 25.632 97.4303 26.16C97.6063 26.672 97.6943 27.28 97.6943 27.984C97.6943 29.712 97.1983 31.032 96.2063 31.944C95.2303 32.84 93.8223 33.288 91.9823 33.288ZM106.626 18.864V33H103.626V18.864H99.426V16.248H110.85V18.864H106.626ZM121.645 33L120.469 28.632H115.069L113.893 33H111.013L115.909 16.248H119.701L124.597 33H121.645ZM118.453 21.624L117.925 18.96H117.589L117.061 21.624L115.789 26.208H119.749L118.453 21.624ZM130.32 33H127.32V16.248H134.256C135.728 16.248 136.84 16.696 137.592 17.592C138.36 18.488 138.744 19.736 138.744 21.336C138.744 22.6 138.504 23.648 138.024 24.48C137.544 25.296 136.84 25.856 135.912 26.16L138.96 33H135.72L132.96 26.4H130.32V33ZM133.944 23.904C134.456 23.904 134.856 23.768 135.144 23.496C135.448 23.224 135.6 22.768 135.6 22.128V20.64C135.6 20 135.448 19.544 135.144 19.272C134.856 19 134.456 18.864 133.944 18.864H130.32V23.904H133.944ZM147.886 18.864V33H144.886V18.864H140.686V16.248H152.11V18.864H147.886ZM160.494 33V16.248H170.286V18.864H163.494V23.232H169.374V25.776H163.494V33H160.494ZM181.233 33L180.057 28.632H174.657L173.481 33H170.601L175.497 16.248H179.289L184.185 33H181.233ZM178.041 21.624L177.513 18.96H177.177L176.649 21.624L175.377 26.208H179.337L178.041 21.624ZM189.907 33H186.907V16.248H193.843C195.315 16.248 196.427 16.696 197.179 17.592C197.947 18.488 198.331 19.736 198.331 21.336C198.331 22.6 198.091 23.648 197.611 24.48C197.131 25.296 196.427 25.856 195.499 26.16L198.547 33H195.307L192.547 26.4H189.907V33ZM193.531 23.904C194.043 23.904 194.443 23.768 194.731 23.496C195.035 23.224 195.187 22.768 195.187 22.128V20.64C195.187 20 195.035 19.544 194.731 19.272C194.443 19 194.043 18.864 193.531 18.864H189.907V23.904H193.531ZM213.153 23.448L213.345 20.616H213.009L211.905 23.352L208.881 29.808L205.881 23.352L204.777 20.64H204.441L204.633 23.448V33H201.801V16.248H205.089L207.585 21.696L208.809 25.128H209.025L210.249 21.696L212.697 16.248H215.985V33H213.153V23.448ZM219.377 33V30.624H221.369V18.624H219.377V16.248H226.361V18.624H224.369V30.624H226.361V33H219.377ZM233.89 23.472L232.714 20.568H232.378L232.57 23.568V33H229.738V16.248H233.074L237.706 25.776L238.882 28.68H239.218L239.026 25.68V16.248H241.858V33H238.522L233.89 23.472ZM255.475 30.456H255.139C255.011 31.272 254.619 31.952 253.963 32.496C253.307 33.024 252.403 33.288 251.251 33.288C249.315 33.288 247.827 32.544 246.787 31.056C245.747 29.568 245.227 27.44 245.227 24.672C245.227 23.136 245.379 21.824 245.683 20.736C246.003 19.632 246.451 18.728 247.027 18.024C247.603 17.304 248.291 16.784 249.091 16.464C249.907 16.128 250.811 15.96 251.803 15.96C253.307 15.96 254.539 16.288 255.499 16.944C256.459 17.584 257.211 18.512 257.755 19.728L255.307 21.144C255.035 20.344 254.619 19.712 254.059 19.248C253.515 18.784 252.763 18.552 251.803 18.552C250.747 18.552 249.915 18.896 249.307 19.584C248.715 20.272 248.419 21.256 248.419 22.536V26.712C248.419 27.992 248.715 28.976 249.307 29.664C249.915 30.352 250.747 30.696 251.803 30.696C252.763 30.696 253.563 30.44 254.203 29.928C254.843 29.416 255.163 28.68 255.163 27.72V26.496H252.235V23.952H258.019V33H255.475V30.456Z" fill="white"/>
            <path d="M118.153 62L117.271 58.724H113.221L112.339 62H110.179L113.851 49.436H116.695L120.367 62H118.153ZM115.759 53.468L115.363 51.47H115.111L114.715 53.468L113.761 56.906H116.731L115.759 53.468ZM124.087 62L120.397 49.436H122.719L124.843 57.212L125.311 59.984H125.563L126.031 57.212L128.137 49.436H130.387L126.751 62H124.087ZM138.384 62L137.502 58.724H133.452L132.57 62H130.41L134.082 49.436H136.926L140.598 62H138.384ZM135.99 53.468L135.594 51.47H135.342L134.946 53.468L133.992 56.906H136.962L135.99 53.468ZM142.19 62V60.218H143.684V51.218H142.19V49.436H147.428V51.218H145.934V60.218H147.428V62H142.19ZM149.961 62V49.436H152.211V60.038H156.621V62H149.961ZM166.007 62L165.125 58.724H161.075L160.193 62H158.033L161.705 49.436H164.549L168.221 62H166.007ZM163.613 53.468L163.217 51.47H162.965L162.569 53.468L161.615 56.906H164.585L163.613 53.468ZM170.263 49.436H175.609C176.593 49.436 177.331 49.718 177.823 50.282C178.327 50.846 178.579 51.638 178.579 52.658C178.579 53.486 178.405 54.128 178.057 54.584C177.709 55.04 177.193 55.292 176.509 55.34V55.61C176.881 55.61 177.217 55.682 177.517 55.826C177.829 55.958 178.093 56.15 178.309 56.402C178.537 56.642 178.711 56.936 178.831 57.284C178.951 57.62 179.011 57.992 179.011 58.4C179.011 58.916 178.939 59.396 178.795 59.84C178.663 60.272 178.471 60.65 178.219 60.974C177.967 61.298 177.661 61.55 177.301 61.73C176.953 61.91 176.557 62 176.113 62H170.263V49.436ZM172.513 60.038H175.465C175.837 60.038 176.125 59.942 176.329 59.75C176.545 59.546 176.653 59.21 176.653 58.742V57.86C176.653 57.392 176.545 57.062 176.329 56.87C176.125 56.666 175.837 56.564 175.465 56.564H172.513V60.038ZM172.513 54.656H175.105C175.465 54.656 175.747 54.566 175.951 54.386C176.155 54.206 176.257 53.894 176.257 53.45V52.604C176.257 52.16 176.155 51.848 175.951 51.668C175.747 51.488 175.465 51.398 175.105 51.398H172.513V54.656ZM181.416 62V49.436H183.666V60.038H188.076V62H181.416ZM190.284 62V49.436H197.826V51.398H192.534V54.674H197.16V56.582H192.534V60.038H197.826V62H190.284ZM212.169 62H204.285V59.912L207.831 56.366C208.455 55.754 208.893 55.214 209.145 54.746C209.409 54.278 209.541 53.792 209.541 53.288V52.748C209.541 52.232 209.403 51.836 209.127 51.56C208.851 51.272 208.455 51.128 207.939 51.128C206.907 51.128 206.265 51.752 206.013 53L204.069 52.244C204.345 51.248 204.825 50.498 205.509 49.994C206.193 49.478 207.063 49.22 208.119 49.22C208.791 49.22 209.367 49.304 209.847 49.472C210.327 49.628 210.717 49.862 211.017 50.174C211.329 50.474 211.551 50.852 211.683 51.308C211.827 51.752 211.899 52.256 211.899 52.82C211.899 53.24 211.857 53.63 211.773 53.99C211.689 54.338 211.545 54.692 211.341 55.052C211.149 55.412 210.885 55.79 210.549 56.186C210.213 56.57 209.793 57.014 209.289 57.518L206.679 60.11H212.169V62ZM218.236 62.216C217.504 62.216 216.874 62.096 216.346 61.856C215.818 61.604 215.38 61.22 215.032 60.704C214.696 60.176 214.444 59.504 214.276 58.688C214.108 57.86 214.024 56.87 214.024 55.718C214.024 54.566 214.108 53.582 214.276 52.766C214.444 51.938 214.696 51.266 215.032 50.75C215.38 50.222 215.818 49.838 216.346 49.598C216.874 49.346 217.504 49.22 218.236 49.22C218.968 49.22 219.598 49.346 220.126 49.598C220.654 49.838 221.086 50.222 221.422 50.75C221.77 51.266 222.028 51.938 222.196 52.766C222.364 53.582 222.448 54.566 222.448 55.718C222.448 56.87 222.364 57.86 222.196 58.688C222.028 59.504 221.77 60.176 221.422 60.704C221.086 61.22 220.654 61.604 220.126 61.856C219.598 62.096 218.968 62.216 218.236 62.216ZM218.236 60.29C218.92 60.29 219.394 60.074 219.658 59.642C219.934 59.198 220.072 58.478 220.072 57.482V53.954C220.072 52.958 219.934 52.244 219.658 51.812C219.394 51.368 218.92 51.146 218.236 51.146C217.552 51.146 217.072 51.368 216.796 51.812C216.532 52.244 216.4 52.958 216.4 53.954V57.482C216.4 58.478 216.532 59.198 216.796 59.642C217.072 60.074 217.552 60.29 218.236 60.29ZM231.611 56.582H227.021V62H224.771V49.436H227.021V54.674H231.611V49.436H233.861V62H231.611V56.582Z" fill="white" fill-opacity="0.6"/>
          </svg>
        </button>
      )}
    </main>
  );
}
